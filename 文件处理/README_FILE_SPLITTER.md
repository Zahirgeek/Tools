# 文件分割工具 (file_splitter)

这是一个用于将文件夹中的文件按随机或顺序方式分割为n份的工具，可以选择复制或剪切文件到目标文件夹。

## 功能特点

- 将文件夹中的文件分割为指定份数
- 支持按文件名顺序分割或随机分割
- 支持自定义各份占比或平均分配
- 支持复制或剪切（移动）操作
- 支持递归处理子文件夹
- 保持原始文件夹结构（递归模式下）

## 安装要求

1. Python 3.6+
2. 无需额外依赖库（使用Python标准库）

## 使用方法

基本用法：

```bash
python file_splitter.py -i <输入文件夹> [选项]
```

### 必需参数

- `-i, --input_dir`：输入文件夹路径

### 可选参数

- `-o, --output_dir`：输出文件夹路径，默认为当前目录下的`output`文件夹
- `-n, --num_splits`：分割份数，默认为2
- `-r, --ratios`：各份占比，用逗号分隔，如"0.7,0.3"，默认为平均分配
- `-s, --random_split`：是否随机分割，默认按文件名顺序分割
- `-m, --move`：是否剪切文件（移动），默认为复制
- `-d, --recursive`：是否递归处理子文件夹，默认不处理

### 示例

```bash
# 基本用法，将input_folder中的文件平均分为2份，复制到output文件夹
python file_splitter.py -i input_folder

# 将input_folder中的文件平均分为3份，复制到custom_output文件夹
python file_splitter.py -i input_folder -o custom_output -n 3

# 将input_folder中的文件按7:3比例分为2份，随机分割，复制到output文件夹
python file_splitter.py -i input_folder -r 0.7,0.3 -s

# 将input_folder中的文件（包括子文件夹）按6:2:2比例分为3份，移动到output文件夹
python file_splitter.py -i input_folder -n 3 -r 0.6,0.2,0.2 -m -d
```

## 工作原理

1. 收集输入文件夹中的所有文件（可选递归处理子文件夹）
2. 如果选择随机分割，则打乱文件顺序；否则按文件名排序
3. 根据指定的比例或平均分配计算每份的文件数量
4. 为每一份创建对应的输出子文件夹（如`split_1`、`split_2`等）
5. 根据分割结果将文件复制或移动到对应的输出子文件夹
6. 在递归模式下，保持原始文件夹结构

## 注意事项

- 如果指定的比例之和不为1，工具会自动归一化
- 如果比例数量与分割份数不一致，将报错
- 在递归模式下，输出文件夹会保持原始的目录结构
- 默认情况下只处理当前文件夹下的文件，不处理子文件夹
- 分割结果会保存在输出文件夹下的子文件夹中，命名为`split_1`、`split_2`等

## 错误处理

工具会处理以下情况并给出相应提示：

- 输入文件夹为空
- 比例参数格式错误
- 文件复制或移动过程中的错误

## 输出示例

成功执行后，工具会显示以下信息：

```
输入目录: input_folder
输出目录: output
分割份数: 3
分割比例: 0.5,0.3,0.2
分割方式: 随机
处理方式: 复制
递归处理: 否

分割 1: 50 个文件
分割 2: 30 个文件
分割 3: 20 个文件
处理完成!
```

输出文件夹结构示例：

```
output/
├── split_1/
│   ├── file1.txt
│   ├── file2.jpg
│   └── ...
├── split_2/
│   ├── file3.pdf
│   ├── file4.png
│   └── ...
└── split_3/
    ├── file5.docx
    ├── file6.csv
    └── ...
``` 