# 随机文件处理脚本使用说明

## 功能描述

这个Python脚本可以根据用户输入的路径和文件总数，智能分配并随机选取文件，然后复制或剪切到指定路径。脚本会确保每个子文件夹都有文件被选取，并按照您的要求进行智能分配。

## 脚本特点

- ✅ **智能分配**：确保每个子文件夹都有文件被选取
- ✅ **公平分配**：文件数量不足时，该子文件夹的文件全部被选取
- ✅ **随机选取**：在每个子文件夹中随机选取指定数量的文件
- ✅ **灵活操作**：支持复制和剪切两种操作
- ✅ **详细统计**：提供完整的处理摘要和统计信息
- ✅ **错误处理**：完善的错误处理和日志记录
- ✅ **中文支持**：完全支持中文路径和文件名

## 选取规则

1. **保证覆盖**：确保每个子文件夹中都有文件被选取
2. **智能分配**：如果某个子文件夹的文件数量不够总数除以子文件夹数量时，该子文件夹的文件全部被选取
3. **随机选取**：在满足上述条件的前提下，随机选取文件
4. **总数控制**：选取的文件总数与用户输入的目标文件总数相等，除非源路径中的文件总数不足

## 使用方法

### 基本用法

```bash
python random_file_processor.py <源路径> <目标文件数> <输出路径> [选项]
```

### 参数说明

- `source_path`：源路径（必需）
- `target_count`：目标文件总数（必需）
- `output_path`：输出路径（必需）
- `-o, --operation`：操作类型，copy(复制) 或 cut(剪切)，默认为copy
- `-v, --verbose`：显示详细日志（可选）

### 使用示例

#### 1. 复制操作
```bash
python random_file_processor.py "input_jb_all" 50 "output_selected" -o copy
```

#### 2. 剪切操作
```bash
python random_file_processor.py "input_jb_all" 30 "output_moved" -o cut
```

#### 3. 显示详细日志
```bash
python random_file_processor.py "input_jb_all" 20 "output_test" -o copy -v
```

## 输出格式

### 处理摘要示例
```
================================================================================
随机文件处理摘要
================================================================================
源路径: input_jb_all
目标文件数: 50
操作类型: copy
输出路径: output_selected

📊 文件分布统计:
   • 子目录数量: 17
   • 可用文件总数: 127
   • 目标选取文件数: 50

📋 文件分配方案:
   • 热成像1: 3/3 个文件
   • 热成像10: 3/6 个文件
   • 热成像11: 3/3 个文件
   • 热成像12: 3/3 个文件
   • 热成像13: 3/6 个文件
   • 热成像14: 3/9 个文件
   • 热成像16: 3/9 个文件
   • 热成像17: 3/12 个文件
   • 热成像18: 3/7 个文件
   • 热成像19: 3/9 个文件
   • 热成像2: 3/6 个文件
   • 热成像3: 3/6 个文件
   • 热成像4: 3/6 个文件
   • 热成像5: 3/15 个文件
   • 热成像6: 3/6 个文件
   • 热成像7: 3/12 个文件
   • 热成像9: 3/9 个文件

📁 处理结果:
   • 选中文件数: 50
   • 成功处理: 50
   • 处理失败: 0
   • 成功率: 100.0%
================================================================================
```

## 分配算法

### 基础分配
1. 计算每个子文件夹的基础分配数量：`目标文件数 ÷ 子文件夹数量`
2. 计算剩余文件数：`目标文件数 % 子文件夹数量`

### 智能分配
1. **文件不足处理**：如果某个子文件夹的文件数量 ≤ 基础分配数，则全部分配该子文件夹的文件
2. **剩余分配**：将剩余文件数分配给有足够文件的子文件夹
3. **随机选取**：在每个子文件夹中随机选取指定数量的文件

### 示例
假设有3个子文件夹，目标选取10个文件：
- 子文件夹A：有3个文件 → 分配3个（全部）
- 子文件夹B：有8个文件 → 分配4个（基础3 + 剩余1）
- 子文件夹C：有5个文件 → 分配3个（基础3）

## 安全提示

- **剪切操作**：使用剪切操作时，原文件会被移动，请确保重要文件已备份
- **路径验证**：脚本会自动验证路径的有效性
- **权限检查**：确保对源路径有读取权限，对输出路径有写入权限
- **磁盘空间**：确保输出路径有足够的磁盘空间 