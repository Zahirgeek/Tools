# 文件数量统计脚本使用指南

## 概述

本项目包含两个Python脚本，用于统计指定路径下子目录的文件数量：

1. **`file_count_statistics.py`** - 通用文件统计脚本
2. **`热成像文件统计.py`** - 专门用于热成像数据的统计脚本

## 脚本功能对比

| 功能特性 | 通用统计脚本 | 热成像统计脚本 |
|---------|-------------|---------------|
| 支持任意级别子目录 | ✅ | ❌ |
| 专门针对热成像目录 | ❌ | ✅ |
| 显示文件占比 | ❌ | ✅ |
| 递归统计所有子目录 | ✅ | ✅ |
| 结果排序 | ✅ | ✅ |
| 文件输出 | ✅ | ✅ |

## 1. 通用文件统计脚本 (`file_count_statistics.py`)

### 功能描述
根据用户输入的路径和第几级子目录，统计子目录同级所有目录及其子目录中的文件数量。

### 使用方法

```bash
python file_count_statistics.py <路径> [选项]
```

### 参数说明
- `path`：要统计的根路径（必需）
- `-l, --level`：目标子目录级别，从1开始（可选，默认为1）
- `-o, --output`：输出文件名（可选）
- `-v, --verbose`：显示详细日志（可选）

### 使用示例

```bash
# 统计第1级子目录
python file_count_statistics.py "input_jb_all"

# 统计第2级子目录
python file_count_statistics.py "input_jb_all" -l 2

# 统计第3级子目录并保存结果
python file_count_statistics.py "input_jb_all" -l 3 -o "统计结果.txt"

# 显示详细日志
python file_count_statistics.py "input_jb_all" -l 2 -v
```

### 输出示例
```
============================================================
文件数量统计结果
============================================================
相对路径                                     文件数量
------------------------------------------------------------
热成像5                                     15
热成像17                                    12
热成像7                                     12
热成像14                                    9
热成像16                                    9
热成像19                                    9
热成像9                                     9
热成像18                                    7
热成像10                                    6
热成像13                                    6
热成像2                                     6
热成像3                                     6
热成像4                                     6
热成像6                                     6
热成像1                                     3
热成像11                                    3
热成像12                                    3
------------------------------------------------------------
总计                                       127
============================================================
```

## 2. 热成像文件统计脚本 (`热成像文件统计.py`)

### 功能描述
专门用于统计热成像数据目录的文件数量，自动识别以"热成像"开头的目录，并显示文件占比。

### 使用方法

```bash
python 热成像文件统计.py <路径> [选项]
```

### 参数说明
- `path`：要统计的根路径（必需）
- `-o, --output`：输出文件名（可选）
- `-v, --verbose`：显示详细日志（可选）

### 使用示例

```bash
# 基本统计
python 热成像文件统计.py "input_jb_all"

# 保存结果到指定文件
python 热成像文件统计.py "input_jb_all" -o "热成像统计.txt"

# 显示详细日志
python 热成像文件统计.py "input_jb_all" -v
```

### 输出示例
```
============================================================
热成像文件数量统计结果
============================================================
热成像目录                文件数量       占比
------------------------------------------------------------
热成像5                 15           11.8%
热成像17                12            9.4%
热成像7                 12            9.4%
热成像14                9             7.1%
热成像16                9             7.1%
热成像19                9             7.1%
热成像9                 9             7.1%
热成像18                7             5.5%
热成像10                6             4.7%
热成像13                6             4.7%
热成像2                 6             4.7%
热成像3                 6             4.7%
热成像4                 6             4.7%
热成像6                 6             4.7%
热成像1                 3             2.4%
热成像11                3             2.4%
热成像12                3             2.4%
------------------------------------------------------------
总计                   127        100.0%
============================================================
```

## 目录级别说明

### 通用脚本的目录级别
- **级别1**：根目录的直接子目录
  - 例如：`input_jb_all/热成像1/`
- **级别2**：第1级子目录的子目录
  - 例如：`input_jb_all/热成像1/2025/`
- **级别3**：第2级子目录的子目录
  - 例如：`input_jb_all/热成像1/2025/07/`

### 热成像脚本的目录识别
热成像脚本会自动识别所有以"热成像"开头的目录，如：
- 热成像1
- 热成像2
- 热成像10
- 热成像11
- 等等...

## 脚本特点

### 通用统计脚本特点
- ✅ 支持任意级别的子目录统计
- ✅ 递归统计所有子目录中的文件
- ✅ 按文件数量排序显示结果
- ✅ 支持多种输出格式
- ✅ 完善的错误处理
- ✅ 详细的日志记录

### 热成像统计脚本特点
- ✅ 专门针对热成像目录优化
- ✅ 自动识别热成像目录
- ✅ 显示文件占比统计
- ✅ 更简洁的输出格式
- ✅ 快速统计大量数据

## 错误处理

两个脚本都包含完善的错误处理机制：

- **路径验证**：检查路径是否存在且为目录
- **权限处理**：对无法访问的目录进行友好提示
- **编码支持**：支持中文路径和文件名
- **异常捕获**：捕获并记录各种文件系统错误

## 性能考虑

- **递归统计**：使用高效的 `os.walk()` 进行递归文件统计
- **内存优化**：逐目录处理，避免一次性加载大量数据
- **进度显示**：实时显示统计进度和结果

## 适用场景

### 通用统计脚本适用场景
- 数据整理和分析
- 存储空间统计
- 文件分布分析
- 系统维护和清理
- 数据备份验证

### 热成像统计脚本适用场景
- 热成像数据管理
- 监控设备数据统计
- 安防系统数据分析
- 设备维护记录统计

## 文件输出

两个脚本都会自动生成统计结果文件：

- 通用脚本：`file_statistics.txt`
- 热成像脚本：`热成像统计结果.txt`

结果文件包含完整的统计信息，便于后续分析和存档。

## 注意事项

1. **路径格式**：支持相对路径和绝对路径
2. **权限要求**：需要读取权限来访问目录和文件
3. **性能考虑**：对于包含大量文件的目录，统计可能需要一些时间
4. **编码支持**：支持中文路径和文件名
5. **错误处理**：无法访问的目录会被跳过并记录警告信息 