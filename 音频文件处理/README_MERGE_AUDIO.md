# 音频合并工具 (merge_audio)

这是一个用于将多个短音频文件合并为长音频文件的工具，专为处理机器人设备上按日期时间命名的短音频文件设计。

## 功能特点

- 将连续时间的多个音频文件合并为一个长音频文件
- 智能分析文件名中的时间戳，确保按时间顺序处理
- 仅合并时间间隔较短的文件（时间差不超过1分钟）
- 确保合并后的音频长度符合要求（至少10秒）
- 保留原始音频的所有特性（采样率、格式等）
- 结果文件以合并起止时间命名，便于后续使用

## 安装要求

1. Python 3.6+
2. pydub 库

安装依赖库：

```bash
pip install pydub
```

## 使用方法

基本用法：

```bash
python merge_audio.py -i <输入文件夹> -o <输出文件夹>
```

参数说明：

- `-i, --input_dir`：输入音频文件夹路径（必需）
- `-o, --output_dir`：输出音频文件夹路径（可选，默认为"audio_merge"）

示例：

```bash
# 基本用法，使用指定的输入和输出文件夹
python merge_audio.py -i audio_convert -o merged_audio

# 使用默认输出文件夹
python merge_audio.py -i audio_convert
```

## 工作原理

1. 读取指定文件夹中的所有WAV文件
2. 解析文件名中的时间戳（格式：YYYYMMDD_HHMMSS.wav）
3. 按日期和时间将文件分组
4. 对于每个日期，将时间连续的文件（时间差不超过1分钟）合并在一起
5. 当收集到5个文件或遇到时间间隔过大的文件时，开始新的分组
6. 合并每个分组中的文件，检查合并后的长度是否达到10秒
7. 将符合长度要求的合并结果保存到输出文件夹

## 注意事项

- 输入文件需按照"YYYYMMDD_HHMMSS.wav"格式命名
- 只处理WAV格式文件
- 默认将5个2秒的文件合并为一个10秒的文件
- 如果合并后的音频长度小于10秒，将不会被保存
- 工具会自动创建输出文件夹（如果不存在）

## 输出格式

合并后的文件将按以下格式命名：

```
YYYYMMDD_HHMMSS_to_HHMMSS.wav
```

例如：`20241211_115741_to_115959.wav` 表示从11:57:41到11:59:59之间的音频文件合并结果。 